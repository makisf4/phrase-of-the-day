<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Η καθημερινή φράση που σε περιγράφει. Χωρίς motivation, μόνο αναγνώριση.">
    <meta property="og:locale" content="el_GR">
    <link rel="canonical" href="https://www.kratagera.gr/">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <title>Η Φράση της Ημέρας που Σε Περιγράφει</title>
    
    <!-- Cookiebot CMP -->
    <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="2886c223-c2ce-48d6-a45c-3f5b0b7d633f" data-blockingmode="auto" type="text/javascript"></script>
    
    <script src="consent-config.js?v=20260104-2"></script>
    <script src="/ads.js?v=20260104-2" defer></script>
    <style>
        :root {
            --bg: #fafbfc;
            --bg2: #f5f6f8;
            --text: #0a0a0a;
            --muted: #64748b;
            --card: rgba(255, 255, 255, 0.92);
            --card2: rgba(255, 255, 255, 0.85);
            --border: rgba(226, 232, 240, 0.6);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.04);
            --shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06);
            --radius: 24px;
            --max: 720px;
            --pad: 1.5rem;
            --gap: 0.875rem;
            --accent: #111827;
            --accent-strong: #0a0f1a;
            --accent-light: color-mix(in srgb, var(--accent) 85%, white);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #0a0e1a;
                --bg2: #0f1419;
                --text: #f8fafc;
                --muted: #94a3b8;
                --card: rgba(26, 31, 46, 0.88);
                --card2: rgba(26, 31, 46, 0.82);
                --border: rgba(45, 55, 72, 0.5);
                --shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 1px 4px rgba(0, 0, 0, 0.2);
                --shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.5), 0 2px 8px rgba(0, 0, 0, 0.3);
                --accent: #1f2937;
                --accent-strong: #111827;
                --accent-light: color-mix(in srgb, var(--accent) 85%, white);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        ::selection {
            background: var(--accent-light);
            color: var(--accent);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
            padding: 2.5rem var(--pad);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(37, 99, 235, 0.04) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 70%, rgba(139, 92, 246, 0.03) 0%, transparent 60%),
                linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
            pointer-events: none;
            z-index: -3;
        }

        .bg-layer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            pointer-events: none;
            z-index: -2;
            opacity: 1;
            transition: opacity 0.8s ease;
        }

        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 50% 20%, rgba(0, 0, 0, 0.25) 0%, transparent 60%),
                radial-gradient(ellipse at 50% 80%, rgba(0, 0, 0, 0.3) 0%, transparent 60%),
                linear-gradient(180deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.35) 50%, rgba(0, 0, 0, 0.3) 100%),
                rgba(0, 0, 0, 0.45);
            pointer-events: none;
            z-index: 1;
        }

        @media (min-width: 768px) {
            .bg-layer {
                background-attachment: fixed;
            }
        }

        .container {
            max-width: var(--max);
            margin: 0 auto;
            position: relative;
            padding: 0 var(--pad);
            z-index: 2;
        }

        .hero {
            text-align: center;
            margin-bottom: 5rem;
            padding-top: 3rem;
        }

        .hero h1 {
            font-size: clamp(34px, 5vw, 72px);
            margin-bottom: 1.25rem;
            color: rgba(255, 255, 255, 0.92);
            font-weight: 800;
            letter-spacing: -0.04em;
            line-height: 1.15;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
            text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45), 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero .subtext {
            font-size: clamp(14px, 1.6vw, 20px);
            color: rgba(255, 255, 255, 0.78);
            font-style: italic;
            font-weight: 400;
            margin: 0;
            letter-spacing: 0.01em;
            text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45), 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .content {
            margin-bottom: 4rem;
        }

        .section {
            margin-bottom: 4rem;
            text-align: center;
        }

        .section:last-of-type {
            margin-bottom: 0;
        }

        .section h2 {
            font-size: clamp(12px, 1.2vw, 16px);
            margin-bottom: 1.75rem;
            margin-top: 0;
            color: rgba(255, 255, 255, 0.78);
            font-weight: 500;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45), 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            text-align: center;
        }

        .card {
            background: var(--card);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            padding: clamp(1.5rem, 3vw, 2.75rem);
            margin-bottom: 0;
            box-shadow: var(--shadow);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @supports not (backdrop-filter: blur(20px)) {
            .card {
                background: var(--card2);
            }
        }

        @media (min-width: 768px) {
            .card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow-hover);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .card {
                transition: none;
            }
            .card:hover {
                transform: none;
            }
        }

        .phrase-box {
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.75rem;
            margin-left: 0;
            margin-right: 0;
            position: relative;
            padding: 0 1.5rem;
        }

        .phrase-box::before,
        .phrase-box::after {
            content: '"';
            position: absolute;
            font-size: 2.5rem;
            font-family: Georgia, serif;
            color: var(--border);
            opacity: 0.2;
            line-height: 1;
            font-weight: 300;
        }

        .phrase-box::before {
            left: 0.5rem;
            top: -0.25rem;
        }

        .phrase-box::after {
            right: 0.5rem;
            bottom: -0.75rem;
            transform: rotate(180deg);
        }

        .phrase {
            font-size: clamp(20px, 3.5vw, 34px);
            line-height: 1.5;
            text-align: center;
            color: var(--text);
            opacity: 0;
            transform: translateY(12px);
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 400;
            max-width: 100%;
            padding: 0;
            margin: 0;
            letter-spacing: -0.015em;
        }

        .phrase.revealed {
            opacity: 1;
            transform: translateY(0);
        }

        @media (prefers-reduced-motion: reduce) {
            .phrase {
                transition: opacity 0.3s ease;
                transform: none;
            }
            .phrase.revealed {
                transform: none;
            }
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 1rem;
            color: var(--muted);
        }

        .loading-dots {
            display: inline-flex;
            gap: 0.25rem;
        }

        .loading-dots span {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--muted);
            animation: bounce 1.4s infinite ease-in-out;
        }

        .loading-dots span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .loading-dots span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .loading-dots span {
                animation: none;
            }
        }

        .streak-line {
            font-size: 0.8125rem;
            color: var(--muted);
            text-align: center;
            margin-bottom: 1.75rem;
            margin-top: 0;
            font-weight: 500;
            letter-spacing: 0.02em;
        }

        .actions {
            display: flex;
            justify-content: center;
            margin-top: 1.75rem;
            margin-left: 0;
            margin-right: 0;
        }

        .actions button {
            max-width: 220px;
            width: 100%;
        }

        button {
            padding: 0.875rem 1.75rem;
            border: 1.5px solid var(--border);
            border-radius: 999px;
            background: var(--card);
            color: var(--text);
            font-size: 0.9375rem;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
            font-weight: 500;
            min-height: 44px;
            position: relative;
            letter-spacing: -0.01em;
        }

        button:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 3px;
        }

        button.btn--primary {
            background: var(--accent);
            color: white;
            border-color: color-mix(in srgb, var(--accent) 70%, transparent);
        }

        button.btn--primary:hover {
            background: var(--accent-light);
            border-color: var(--accent-light);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px color-mix(in srgb, var(--accent) 40%, transparent);
        }

        button.btn--primary:active {
            background: var(--accent-strong);
            border-color: var(--accent-strong);
        }

        button.btn--primary:focus-visible {
            outline: none;
            box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent) 35%, transparent);
        }

        @supports not (color-mix(in srgb, var(--accent) 85%, white)) {
            button.btn--primary:hover {
                background: color-mix(in srgb, var(--accent) 85%, white);
                border-color: color-mix(in srgb, var(--accent) 85%, white);
            }
        }

        button.btn--secondary {
            background: transparent;
            border-color: var(--border);
            color: var(--text);
        }

        button.btn--secondary:hover {
            background: var(--card);
            border-color: var(--muted);
            transform: translateY(-1px);
        }

        button.btn--tertiary {
            background: transparent;
            border-color: transparent;
            color: var(--muted);
        }

        button.btn--tertiary:hover {
            background: var(--card);
            color: var(--text);
            border-color: var(--border);
        }

        button:active {
            transform: translateY(0) scale(0.98);
        }

        @media (prefers-reduced-motion: reduce) {
            button {
                transition: none;
            }
            button:hover {
                transform: none;
            }
            button:active {
                transform: none;
            }
        }


        .section p {
            margin-bottom: 0;
            margin-top: 0;
            color: rgba(255, 255, 255, 0.78);
            line-height: 1.85;
            font-size: 0.9375rem;
            text-align: center;
            max-width: 100%;
            font-weight: 400;
            letter-spacing: 0.01em;
            text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45), 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .kg-quote-of-day {
            max-width: var(--max);
            margin: 0 auto 2.75rem;
            padding: clamp(1.5rem, 3vw, 2.25rem);
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) - 4px);
            box-shadow: var(--shadow);
            color: var(--text);
            text-align: left;
            line-height: 1.7;
        }

        .kg-quote-of-day h2 {
            font-size: clamp(1.2rem, 2.4vw, 1.6rem);
            margin-bottom: 0.5rem;
            font-weight: 700;
            letter-spacing: -0.01em;
        }

        .kg-quote-meta {
            margin: 0 0 1rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .kg-quote-of-day blockquote {
            margin: 0 0 0.75rem;
            padding-left: 1rem;
            border-left: 2px solid var(--border);
        }

        .kg-quote-en {
            margin: 0 0 0.5rem;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .kg-quote-of-day blockquote footer {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.78);
        }

        .kg-quote-el {
            margin: 0.75rem 0 0;
            font-size: 0.98rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .kg-quote-source {
            display: inline-block;
            margin-top: 0.65rem;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.82);
            text-decoration: none;
        }

        .kg-quote-source:hover {
            text-decoration: underline;
        }

        .content-sections {
            max-width: var(--max);
            margin: 0 auto 4rem;
            padding: clamp(1.75rem, 3vw, 2.75rem);
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) - 4px);
            box-shadow: var(--shadow);
            color: var(--text);
            line-height: 1.75;
            text-align: left;
            backdrop-filter: blur(18px) saturate(180%);
            -webkit-backdrop-filter: blur(18px) saturate(180%);
        }

        .content-block {
            margin-bottom: 2.25rem;
        }

        .content-block:last-child {
            margin-bottom: 0;
        }

        .content-sections h2 {
            font-size: clamp(1.15rem, 2.2vw, 1.6rem);
            margin-bottom: 0.75rem;
            color: var(--text);
            font-weight: 700;
            letter-spacing: -0.01em;
        }

        .content-sections h3 {
            font-size: 1rem;
            margin-top: 1rem;
            margin-bottom: 0.35rem;
            color: var(--text);
            font-weight: 600;
        }

        .content-sections p {
            margin: 0.5rem 0 0;
            color: var(--text);
            text-shadow: none;
        }

        .recent-phrases {
            list-style: none;
            margin: 0.75rem 0 0;
            padding: 0;
        }

        .recent-phrases li {
            padding: 0.55rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.95rem;
        }

        .recent-phrases li:last-child {
            border-bottom: none;
        }

        .faq-item + .faq-item {
            margin-top: 0.75rem;
        }

        .content-cta {
            text-align: center;
            font-weight: 600;
        }

        @media (min-width: 768px) {
            body {
                padding: 3.5rem var(--pad);
            }

            .container {
                padding: 0 var(--pad);
            }

            .hero {
                margin-bottom: 6rem;
                padding-top: 4rem;
            }

            .card {
                padding: 3.5rem;
            }

            .phrase-box {
                min-height: 200px;
            }

            .actions {
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: var(--gap);
            }

            .actions button:nth-child(3),
            .actions button:nth-child(4) {
                grid-column: auto;
            }

            button {
                padding: 0.9375rem 2rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 2rem 1.25rem;
            }

            .container {
                padding: 0 1.25rem;
            }

            .hero {
                margin-bottom: 4rem;
                padding-top: 2rem;
            }

            .hero h1 {
                font-size: 1.875rem;
            }

            .card {
                padding: 2rem;
            }

            .phrase-box {
                min-height: 160px;
            }

            .phrase-box::before,
            .phrase-box::after {
                font-size: 2rem;
            }

            .actions {
                grid-template-columns: 1fr 1fr;
            }

            button {
                width: 100%;
            }

            footer a {
                display: block;
                margin: 0.5rem 0;
            }

            .ad-wrap {
                min-height: 250px;
                margin-top: 2.5rem;
                padding: 0 1.25rem;
            }
        }

        /* Ad Slot Styling */
        .ad-wrap {
            max-width: var(--max);
            margin: 3rem auto 0;
            padding: 0 var(--pad);
            min-height: 250px;
            display: block;
            position: relative;
            z-index: 2;
            /* Temporary: visible background for debugging */
            background: rgba(255, 255, 255, 0.02);
        }

        .ad-wrap::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 1px;
            height: 2rem;
            background: var(--border);
        }

        @media (min-width: 768px) {
            .ad-wrap {
                min-height: 280px;
                margin-top: 4rem;
            }
        }

        /* Light Cookiebot styling - minimal constraints only */
        #CybotCookiebotDialog {
            max-width: 520px !important;
            max-height: 90vh !important;
        }

        #CybotCookiebotDialogBody {
            max-height: 85vh !important;
            overflow-y: auto !important;
        }

        /* Safety: prevent horizontal scroll lock */
        html, body {
            overflow-x: hidden;
        }
    </style>
</head>
<body class="app">
    <div class="bg-layer" id="bgLayer"></div>
    <div class="bg-overlay"></div>
    <div class="container">
        <header class="hero">
            <h1>Η Φράση της Ημέρας<br>που σε Περιγράφει</h1>
            <p class="subtext">Δεν είναι motivation. Είναι αναγνώριση.</p>
        </header>

        <main class="content">
            <!-- Phrase Container (always visible) -->
            <section id="phrase-container" class="section">
                <h2 id="sectionTitle" class="section-title">Η σημερινή φράση</h2>
                
                <!-- Actual phrase content -->
                <div id="phrase-content">
                    <div class="card card--primary">
                        <div class="phrase-box" id="phraseBox">
                            <div class="loading" id="loading">
                                Περίμενε<span class="loading-dots"><span></span><span></span><span></span></span>
                            </div>
                            <div class="phrase" id="phrase"></div>
                        </div>
                        <div class="streak-line" id="streakLine"></div>
                        <div class="actions">
                            <button id="shareBtn" class="btn--primary" data-action="share">Share</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <p>Μια καθημερινή φράση που αλλάζει κάθε μέρα για όλους. Χωρίς motivation, χωρίς horoscope. Μόνο μια ειρωνική ανάγνωση της καθημερινότητας, με ένα διακριτικό «σαν σήμερα».</p>
            </section>

            <section class="kg-quote-of-day" aria-label="Σαν σήμερα">
                <h2>Σαν σήμερα</h2>
                <p id="kgQuoteMeta" class="kg-quote-meta"></p>
                <blockquote>
                    <p id="kgQuoteEn" class="kg-quote-en"></p>
                    <footer id="kgQuoteAuthor"></footer>
                </blockquote>
                <p id="kgQuoteEl" class="kg-quote-el"></p>
                <div id="kgQuoteSource"></div>
            </section>

            <section id="content-sections" class="content-sections">
                <div class="content-block">
                    <h2>Τι είναι η Φράση της Ημέρας που σε Περιγράφει;</h2>
                    <p>Κάθε μέρα εμφανίζεται μία διαφορετική φράση που «κολλάει» στη διάθεση της ημέρας.</p>
                    <p>Είναι ένα μικρό, σαρκαστικό σχόλιο για την καθημερινότητα — για χαβαλέ και αυτοαναγνώριση.</p>
                    <p>Δεν είναι τεστ προσωπικότητας και δεν κάνει καμία ψυχολογική αξιολόγηση ή διάγνωση.</p>
                </div>

                <div class="content-block">
                    <h2>Πώς βγαίνει η σημερινή φράση</h2>
                    <p>Η επιλογή βασίζεται στην ημερομηνία, ώστε όλοι να βλέπουν την ίδια φράση μέσα στη μέρα.</p>
                </div>

                <div class="content-block">
                    <h2>Streak</h2>
                    <p>Μετράει τις συνεχόμενες μέρες επιστροφής από την ίδια συσκευή. Η μέτρηση γίνεται τοπικά, χωρίς cookies παρακολούθησης.</p>
                </div>

                <div class="content-block">
                    <h2>Προηγούμενες φράσεις</h2>
                    <ul id="recent-phrases" class="recent-phrases"></ul>
                </div>

                <div class="content-block">
                    <h2>FAQ</h2>
                    <div class="faq-item">
                        <h3>Είναι τυχαίο;</h3>
                        <p>Όχι. Η φράση προκύπτει από την ημερομηνία, ώστε να είναι ίδια για όλους την ίδια μέρα.</p>
                    </div>
                    <div class="faq-item">
                        <h3>Αποθηκεύετε δεδομένα;</h3>
                        <p>Δεν κρατάμε προσωπικά δεδομένα. Μόνο το streak αποθηκεύεται τοπικά στη συσκευή σου.</p>
                    </div>
                    <div class="faq-item">
                        <h3>Γιατί βλέπω άλλη φράση σε άλλη μέρα;</h3>
                        <p>Κάθε ημερομηνία αντιστοιχεί σε διαφορετική φράση, οπότε αλλάζει με την ημέρα.</p>
                    </div>
                    <div class="faq-item">
                        <h3>Τι είναι το streak;</h3>
                        <p>Είναι το σερί επιστροφών σου. Αν μπαίνεις κάθε μέρα, ο αριθμός ανεβαίνει.</p>
                    </div>
                </div>

                <div class="content-block content-cta">
                    <p>Έλα αύριο για τη νέα φράση.</p>
                </div>
            </section>
        </main>

        <!-- Ad Slot -->
        <section id="ad-slot-home" class="ad-wrap" aria-label="Διαφήμιση">
            <!-- AdSense ad will be inserted here when consent is granted -->
        </section>

        <footer style="text-align: center; margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border);">
            <a href="index.html" style="color: rgba(255, 255, 255, 0.78); text-decoration: none; font-size: 0.875rem; text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45); transition: opacity 0.2s; margin: 0 0.75rem; display: inline-block;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Αρχική</a>
            <a href="about.html" style="color: rgba(255, 255, 255, 0.78); text-decoration: none; font-size: 0.875rem; text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45); transition: opacity 0.2s; margin: 0 0.75rem; display: inline-block;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Σχετικά</a>
            <a href="privacy.html" style="color: rgba(255, 255, 255, 0.78); text-decoration: none; font-size: 0.875rem; text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45); transition: opacity 0.2s; margin: 0 0.75rem; display: inline-block;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Πολιτική Απορρήτου</a>
            <a href="contact.html" style="color: rgba(255, 255, 255, 0.78); text-decoration: none; font-size: 0.875rem; text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45); transition: opacity 0.2s; margin: 0 0.75rem; display: inline-block;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Επικοινωνία</a>
            <a href="javascript:void(0)" data-action="open-cookies" style="color: rgba(255, 255, 255, 0.78); text-decoration: none; font-size: 0.875rem; text-shadow: 0 1px 18px rgba(0, 0, 0, 0.45); transition: opacity 0.2s; margin: 0 0.75rem; display: inline-block;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Ρυθμίσεις cookies</a>
        </footer>

    </div>

    <script src="quotes.js"></script>
    <script>
        const PHRASES = [
            "Έκανες ό,τι μπορούσες. Απλώς όχι πολλά.",
            "Δεν είσαι κουρασμένος. Απλώς βαρέθηκες.",
            "Είπες 'αύριο' και το εννοούσες.",
            "Σήμερα είσαι σε \"λειτουργία\": λειτουργώ, δεν ζω.",
            "Ξεκίνησες δυναμικά. Μετά θυμήθηκες ποιος είσαι.",
            "Έχεις πρόγραμμα. Απλώς δεν το ακολουθείς.",
            "Το έψαξες πολύ. Και στο τέλος δεν το έκανες.",
            "Δεν αναβάλεις. Απλώς δίνεις χρόνο στις ιδέες να… πεθάνουν μόνες τους.",
            "Σκέφτηκες να το κάνεις σωστά. Και διάλεξες το λάθος.",
            "Σήμερα νιώθεις... \"θα δούμε\".",
            "Είσαι παραγωγικός. Σε πράγματα που δεν μετράνε.",
            "Έβαλες στόχο. Και μετά σε τρόμαξε η συνέπεια.",
            "Δεν θες πολλά. Θες απλώς να μη σε ενοχλούν.",
            "Έχεις άποψη. Απλώς δεν έχεις ενέργεια να τη στηρίξεις.",
            "Είσαι σε φάση \"άστο όπως είναι... θα το χαλάσω\".",
            "Έκανες plan B. Και μετά έζησες στο plan B.",
            "Σήμερα είπες \"θα απαντήσω αργότερα\" και το έκανες.",
            "Δεν είσαι χαμένος. Απλώς κάνεις κύκλους με αυτοπεποίθηση.",
            "Είσαι ήρεμος. Από παραίτηση.",
            "Είσαι full booked. Από αποφυγές.",
            "Σου αξίζει διάλειμμα. Αλλά το πήρες πριν ξεκινήσεις.",
            "Έχεις κίνητρο. Κάπου. Δεν ξέρεις πού.",
            "Σήμερα η διάθεσή σου είναι \"μην τυχόν\".",
            "Δεν θες drama. Θες απλώς να έχεις δίκιο. Απλά.",
            "Λες \"ναι\" σε πράγματα που μετά μισείς. Κλασικά.",
            "Είσαι καλός άνθρωπος. Απλώς με μικρή υπομονή.",
            "Σήμερα είσαι \"ό,τι γίνει\". Και γίνεται.",
            "Θες να αλλάξεις ζωή. Με μικρό κόστος και χωρίς ενόχληση.",
            "Είσαι οργανωμένος. Στο χάος σου.",
            "Η αυτοπεποίθησή σου είναι σταθερή. Χαμηλά, αλλά σταθερή.",
            "Δεν είσαι αντικοινωνικός. Απλώς είσαι selective με την ψυχική σου υγεία.",
            "Είσαι \"μια χαρά\". Με τη δική σου, πολύ ειδική έννοια.",
            "Σήμερα είσαι \"δεν προλαβαίνω\" ενώ προλαβαίνεις... να σκρολάρεις.",
            "Δεν είσαι αναποφάσιστος. Απλώς όλα σε κουράζουν εξίσου.",
            "Έχεις πει \"τελευταία φορά\". Πολλές τελευταίες φορές.",
            "Σήμερα το πήρες απόφαση: να μη πάρεις αποφάσεις.",
            "Δεν θες να σε καταλάβουν. Θες να σε αφήσουν.",
            "Είσαι σε mood \"μην μου βάζεις tasks\".",
            "Είσαι αποτελεσματικός. Στο να αποφεύγεις το κυρίως θέμα.",
            "Σήμερα κάνεις το minimum. Και το minimum αντιστέκεται.",
            "Είσαι έτοιμος να ξεκινήσεις. Αύριο.",
            "Δεν βαριέσαι. Απλώς όλα σου φαίνονται \"meh\".",
            "Έχεις χόμπι. Να σκέφτεσαι τι θα έκανες αν είχες χρόνο.",
            "Σήμερα είσαι \"θα το δω\"... και δεν θα το δεις.",
            "Δεν έχεις θέμα. Έχεις συλλογή από μικρά θέματα.",
            "Είσαι zen. Από έλλειψη αντιδράσεων.",
            "Σήμερα νιώθεις \"μην ανοίγεις κουβέντες\".",
            "Είσαι σε φάση \"ναι οκ\" αλλά με εσωτερικό scream.",
            "Το προσπάθησες. Με το βλέμμα.",
            "Σήμερα είσαι \"έχω πολλά\" και είναι όλα στο κεφάλι σου.",
            "Είσαι καλός στο να ξεκινάς. Κακός στο να συνεχίζεις.",
            "Σήμερα είσαι \"αρκεί να βγάλουμε η μέρα\".",
            "Δεν θες να κάνεις λάθος. Άρα δεν κάνεις τίποτα. Έξυπνο.",
            "Σήμερα είσαι \"θα κοιμηθώ νωρίς\" και το ξέρεις ότι λες ψέματα.",
            "Σκέφτεσαι \"θα αδυνατίσω\" αλλά πρώτα χρειάζομαι ένα σνακ.",
            "Σήμερα είσαι κοινωνικός. Με όρο: Δεν είμαι κοινωνικός σήμερα.",
            "Έχεις standards. Απλώς όχι για τον εαυτό σου.",
            "Σήμερα είσαι \"πάμε πάλι\" χωρίς το \"πάμε\".",
            "Θες ηρεμία. Και μετά ανοίγεις το κινητό.",
            "Είσαι σε φάση \"μη με ρωτάς, απλώς υπάρχω\".",
            "Σήμερα είσαι λειτουργικός. Όχι απαραίτητα χρήσιμος.",
            "Δεν είσαι μπερδεμένος. Απλώς δεν θες να ασχοληθείς.",
            "Έχεις άποψη. Την κρατάς για ώρα ανάγκης.",
            "Σήμερα νιώθεις \"χμ... ας το αφήσω έτσι\".",
            "Δεν κουράστηκες από τη δουλειά. Κουράστηκες από το καθισιό.",
            "Έχεις ενέργεια. Απλώς τη φυλάς.",
            "Σήμερα δεν πήγες πίσω. Απλώς δεν προχώρησες.",
            "Έκανες focus. Σε λάθος πράγμα.",
            "Δεν είσαι αρνητικός. Είσαι ρεαλιστής με εμπειρία.",
            "Σήμερα θα πεις \"δεν αξίζει τον κόπο\".",
            "Δεν θες να εξηγήσεις. Θες να τελειώνει.",
            "Είσαι σε φάση \"το παλεύω\" χωρίς το παλεύω.",
            "Σήμερα είσαι ήσυχος. Ύποπτα ήσυχος.",
            "Δεν έχεις κανένα θέμα. Έχεις απλώς χαμηλή ανοχή.",
            "Σήμερα είσαι... \"όχι τώρα\".",
            "Έχεις ιδέες. Δεν έχεις όρεξη για συνέπειες.",
            "Δεν βαριέσαι. Έχεις δει το έργο.",
            "Σήμερα είσαι \"ας μη γίνει πάλι θέμα\".",
            "Δεν είσαι πίσω. Απλώς δεν έτρεξες.",
            "Σήμερα είσαι σε power-saving mode.",
            "Έχεις διάθεση. Αλλά... όχι για αυτό.",
            "Δεν είσαι δύσκολος. Απλώς δεν σε ενθουσιάζει τίποτα εύκολα.",
            "Σήμερα είσαι \"ας το αφήσουμε εδώ\".",
            "Δεν ξέχασες. Απλώς δεν έδωσες σημασία.",
            "Σήμερα είσαι πρακτικός. Μέχρι αδιαφορίας.",
            "Δεν είσαι σνομπ. Απλά, έχεις κλείσει τις ειδοποιήσεις.",
            "Σήμερα είσαι \"έτσι είμαστε και δεν αλλάζουμε για κανέναν\".",
            "Δεν απογοητεύτηκες. Το περίμενες.",
            "Σήμερα είσαι σε φάση \"δεν θα το ανοίξω\".",
            "Έχεις εμπειρία. Γι' αυτό δεν ενθουσιάζεσαι.",
            "Σήμερα είσαι \"το βλέπουμε\". Αλλά δεν θα το δούμε...",
            "Δεν έχασες τον έλεγχο. Τον άφησες.",
            "Σήμερα είσαι ήρεμος. Με εσωτερική ένταση.",
            "Δεν αγχώνεσαι. Απλώς δεν σε νοιάζει όσο παλιά.",
            "Σήμερα είσαι \"όπως να 'ναι\".",
            "Δεν το παράκανες. Το άφησες στη μέση.",
            "Σήμερα είσαι λειτουργικός μόνο στα βασικά.",
            "Δεν είσαι εκτός. Απλώς δεν μπήκες.",
            "Σήμερα είσαι \"δεν θα το κάνω θέμα\".",
            "Δεν βαρέθηκες τους άλλους. Τους κατάλαβες.",
            "Σήμερα είσαι low effort, high awareness.",
            "Δεν είσαι αποστασιοποιημένος. Προστατεύεσαι.",
            "Σήμερα είσαι \"που θα πάει θα περάσει\".",
            "Δεν είσαι αρνητικός. Είσαι κουρασμένος... από ενθουσιασμό.",
            "Σήμερα είσαι \"ε, δεν χρειάζεται και συνέχεια...\"",
            "Δεν έκανες πίσω. Έμεινες εκεί.",
            "Σήμερα είσαι σε φάση \"καλά είναι\". Λες ψέμματα.",
            "Δεν ψάχνεις λύσεις. Ψάχνεις ησυχία.",
            "Σήμερα είσαι \"ας μην το τραβήξουμε\".",
            "Δεν είσαι αδιάφορος. Έχεις κάνει επιλογές.",
            "Σήμερα είσαι όσο χρειάζεται. Αλλά χρειάζεται περισσότερο.",
            "Δεν έχασες το ενδιαφέρον. Το εξάντλησες.",
            "Σήμερα είσαι \"ας το αφήσουμε για αύριο\".",
            "Δεν είσαι κουρασμένος. Είσαι χορτάτος από προσπάθεια.",
            "Σήμερα είσαι σε mood \"όχι παραπάνω\".",
            "Δεν παραιτήθηκες. Απλώς έκοψες τα περιττά.",
            "Σήμερα είσαι απλός. Και σου φτάνει.",
            "Δεν θες να πείσεις. Θες να συνεχίσεις.",
            "Σήμερα είσαι \"μέχρι εδώ καλά\".",
            "Δεν έκανες λιγότερα. Έκανες όσα άντεχες."
        ];

        // Simple hash function for deterministic selection
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            return Math.abs(hash);
        }

        function getDateKey(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function kgGetLocalDateKeyYYYYMMDD(d = new Date()) {
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return `${year}${month}${day}`;
        }

        function kgGetLocalMMDD(d = new Date()) {
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return `${month}-${day}`;
        }

        function kgDayOfYearLocal(d = new Date()) {
            const start = new Date(d.getFullYear(), 0, 1, 12);
            const current = new Date(d.getFullYear(), d.getMonth(), d.getDate(), 12);
            const msPerDay = 24 * 60 * 60 * 1000;
            return Math.round((current - start) / msPerDay);
        }

        function formatDateForDisplay(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${day}/${month}/${year}`;
        }

        function formatShortDate(date) {
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${day}/${month}`;
        }

        function getPhraseForDate(dateKey) {
            const hash = simpleHash(dateKey);
            const index = hash % PHRASES.length;
            return PHRASES[index];
        }

        function renderRecentPhrases(count = 7) {
            const list = document.getElementById('recent-phrases');
            if (!list) {
                return;
            }

            list.innerHTML = '';
            const today = new Date();

            for (let i = 1; i <= count; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                const dateKey = getDateKey(date);
                const phrase = getPhraseForDate(dateKey);
                const item = document.createElement('li');
                item.textContent = `${formatShortDate(date)} — ${phrase}`;
                list.appendChild(item);
            }
        }

        function getDailyFamousQuote() {
            const quotes = window.KG_FAMOUS_QUOTES;
            if (!Array.isArray(quotes) || quotes.length === 0) {
                return null;
            }
            const dayIndex = kgDayOfYearLocal();
            return quotes[dayIndex % quotes.length];
        }

        function getOnThisDayQuote() {
            const lookup = window.KG_ON_THIS_DAY_QUOTES;
            if (!lookup || typeof lookup !== 'object') {
                return null;
            }
            const mmdd = kgGetLocalMMDD();
            const list = lookup[mmdd];
            if (!Array.isArray(list) || list.length === 0) {
                return null;
            }
            const dayIndex = kgDayOfYearLocal();
            return list[dayIndex % list.length];
        }

        function renderOnThisDayQuote() {
            const metaEl = document.getElementById('kgQuoteMeta');
            const enEl = document.getElementById('kgQuoteEn');
            const authorEl = document.getElementById('kgQuoteAuthor');
            const elEl = document.getElementById('kgQuoteEl');
            const sourceWrap = document.getElementById('kgQuoteSource');

            if (!metaEl || !enEl || !authorEl || !elEl || !sourceWrap) {
                return;
            }

            const onThisDayQuote = getOnThisDayQuote();
            const todayQuote = onThisDayQuote || getDailyFamousQuote();

            if (!todayQuote) {
                metaEl.textContent = 'Διάσημο απόφθεγμα της ημέρας';
                enEl.textContent = '';
                authorEl.textContent = '';
                elEl.textContent = '';
                sourceWrap.innerHTML = '';
                return;
            }

            if (onThisDayQuote) {
                const metaParts = [];
                if (todayQuote.year) metaParts.push(String(todayQuote.year));
                if (todayQuote.context) metaParts.push(todayQuote.context);
                metaEl.textContent = metaParts.length ? metaParts.join(' · ') : 'Σαν σήμερα';
            } else {
                metaEl.textContent = 'Διάσημο απόφθεγμα της ημέρας';
            }

            enEl.textContent = todayQuote.en ? `"${todayQuote.en}"` : '';
            authorEl.textContent = todayQuote.author ? `— ${todayQuote.author}` : '';
            elEl.textContent = todayQuote.el ? `«${todayQuote.el}»` : '';

            sourceWrap.innerHTML = '';
            if (todayQuote.source) {
                const link = document.createElement('a');
                link.className = 'kg-quote-source';
                link.href = todayQuote.source;
                link.target = '_blank';
                link.rel = 'noopener';
                link.textContent = 'Πηγή';
                sourceWrap.appendChild(link);
            }
        }

        function getYesterdayKey() {
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            return getDateKey(yesterday);
        }

        function getRandomPhrase(excludePhrase = null) {
            let randomPhrase;
            do {
                const randomIndex = Math.floor(Math.random() * PHRASES.length);
                randomPhrase = PHRASES[randomIndex];
            } while (excludePhrase && randomPhrase === excludePhrase && PHRASES.length > 1);
            return randomPhrase;
        }

        // Timezone-safe streak logic using local dates (not UTC)
        function kgGetLocalDateKey(d = new Date()) {
            const y = d.getFullYear();
            const m = String(d.getMonth() + 1).padStart(2, "0");
            const day = String(d.getDate()).padStart(2, "0");
            return `${y}-${m}-${day}`; // LOCAL date (not UTC)
        }

        function kgParseDateKey(dateKey) {
            // dateKey: YYYY-MM-DD -> Date at local midnight
            const [y, m, d] = dateKey.split("-").map(Number);
            return new Date(y, (m || 1) - 1, d || 1);
        }

        function kgDiffDaysLocal(aKey, bKey) {
            // returns whole-day difference between local midnights
            const a = kgParseDateKey(aKey);
            const b = kgParseDateKey(bKey);
            const msPerDay = 24 * 60 * 60 * 1000;
            return Math.round((b.getTime() - a.getTime()) / msPerDay);
        }

        function updateStreak() {
            try {
                if (typeof Storage === 'undefined') return null;
                
                const todayKey = kgGetLocalDateKey();
                const lastKey = localStorage.getItem("kg_last_visit");
                const rawStreak = localStorage.getItem("kg_streak");
                const streak = Number.isFinite(Number(rawStreak)) ? Number(rawStreak) : 0;

                if (!lastKey) {
                    localStorage.setItem("kg_last_visit", todayKey);
                    localStorage.setItem("kg_streak", "1");
                    return 1;
                }

                if (lastKey === todayKey) {
                    // already counted today
                    if (streak >= 1) return streak;
                    localStorage.setItem("kg_streak", "1");
                    return 1;
                }

                const diff = kgDiffDaysLocal(lastKey, todayKey);

                if (diff === 1) {
                    const next = Math.max(1, streak) + 1;
                    localStorage.setItem("kg_last_visit", todayKey);
                    localStorage.setItem("kg_streak", String(next));
                    return next;
                }

                // If clock changed and lastKey appears in the future OR gap > 1 day -> reset
                localStorage.setItem("kg_last_visit", todayKey);
                localStorage.setItem("kg_streak", "1");
                return 1;
            } catch (e) {
                return null;
            }
        }

        function getStreak() {
            try {
                if (typeof Storage === 'undefined') return null;
                const streak = localStorage.getItem('kg_streak');
                return streak ? parseInt(streak, 10) : null;
            } catch (e) {
                return null;
            }
        }

        function showPhrase(phrase, isReveal = false) {
            const loadingEl = document.getElementById('loading');
            const phraseEl = document.getElementById('phrase');
            
            if (isReveal) {
                loadingEl.style.display = 'none';
                phraseEl.textContent = phrase;
                setTimeout(() => {
                    phraseEl.classList.add('revealed');
                }, 50);
            } else {
                phraseEl.textContent = phrase;
                phraseEl.classList.add('revealed');
            }
        }

        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    const btn = document.getElementById('copyBtn');
                    const originalText = btn.textContent;
                    btn.textContent = 'Αντιγράφηκε!';
                    setTimeout(() => {
                        btn.textContent = originalText;
                    }, 2000);
                }).catch(() => {
                    fallbackCopy(text);
                });
            } else {
                fallbackCopy(text);
            }
        }

        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                const btn = document.getElementById('copyBtn');
                const originalText = btn.textContent;
                btn.textContent = 'Αντιγράφηκε!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            } catch (e) {
                // Ignore
            }
            document.body.removeChild(textArea);
        }

        async function shareUrl(buttonElement) {
            const url = window.location.href.split('#')[0];
            // Get button from DOM at click time (resilient to re-renders)
            const shareBtn = buttonElement || document.querySelector('[data-action="share"]');
            if (!shareBtn) {
                console.warn('Share button not found');
                return;
            }
            const originalText = shareBtn.textContent;

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: document.title,
                        url: url
                    });
                } catch (err) {
                    if (err.name !== 'AbortError') {
                        console.warn('Share failed, falling back to clipboard:', err);
                        await copyUrlToClipboard(url, shareBtn, originalText);
                    }
                }
            } else {
                await copyUrlToClipboard(url, shareBtn, originalText);
            }
        }

        async function copyUrlToClipboard(url, button, originalText) {
            try {
                await navigator.clipboard.writeText(url);
                showCopyFeedback(button, originalText);
            } catch (err) {
                // Fallback to textarea method
                const textarea = document.createElement('textarea');
                textarea.value = url;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                    showCopyFeedback(button, originalText);
                } catch (e) {
                    console.error('Failed to copy URL:', e);
                } finally {
                    document.body.removeChild(textarea);
                }
            }
        }

        function showCopyFeedback(button, originalText) {
            button.textContent = 'Copied!';
            setTimeout(() => {
                button.textContent = originalText;
            }, 1200);
        }

        // Extract accent color from image
        function extractAccentColor(img) {
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const size = 50;
                canvas.width = size;
                canvas.height = size;
                
                ctx.drawImage(img, 0, 0, size, size);
                const imageData = ctx.getImageData(0, 0, size, size);
                const pixels = imageData.data;
                
                let rSum = 0, gSum = 0, bSum = 0;
                let count = 0;
                
                for (let i = 0; i < pixels.length; i += 4) {
                    const r = pixels[i];
                    const g = pixels[i + 1];
                    const b = pixels[i + 2];
                    const brightness = (r + g + b) / 3;
                    
                    // Ignore very dark (near black) and very light (near white)
                    if (brightness > 30 && brightness < 220) {
                        rSum += r;
                        gSum += g;
                        bSum += b;
                        count++;
                    }
                }
                
                if (count === 0) {
                    return null;
                }
                
                let r = Math.round(rSum / count);
                let g = Math.round(gSum / count);
                let b = Math.round(bSum / count);
                
                // Boost saturation slightly
                const max = Math.max(r, g, b);
                const min = Math.min(r, g, b);
                const delta = max - min;
                const saturation = delta / max;
                
                if (saturation < 0.3) {
                    // Low saturation, boost it
                    const boost = 1.3;
                    r = Math.min(255, Math.round(r + (max - r) * (boost - 1)));
                    g = Math.min(255, Math.round(g + (max - g) * (boost - 1)));
                    b = Math.min(255, Math.round(b + (max - b) * (boost - 1)));
                }
                
                // Ensure minimum contrast (not too dark)
                const brightness = (r + g + b) / 3;
                if (brightness < 80) {
                    const lighten = 1.4;
                    r = Math.min(255, Math.round(r * lighten));
                    g = Math.min(255, Math.round(g * lighten));
                    b = Math.min(255, Math.round(b * lighten));
                }
                
                return `rgb(${r}, ${g}, ${b})`;
            } catch (e) {
                console.warn('Failed to extract accent color:', e);
                return null;
            }
        }

        // Initialize background image
        function initBackground() {
            const today = new Date();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const bgLayer = document.getElementById('bgLayer');
            
            if (!bgLayer) {
                console.warn('bgLayer element not found');
                return;
            }
            
            console.log('Initializing background for month:', month);
            
            // Try different extensions
            const extensions = ['jpg', 'jpeg', 'png', 'webp'];
            let imagePath = '';
            
            function tryLoadImage(extIndex, pathIndex = 0) {
                if (extIndex >= extensions.length) {
                    console.warn('No background image found for month', month);
                    return;
                }
                
                const ext = extensions[extIndex];
                const paths = [
                    `./monthPhotos/month-${month}.${ext}`,
                    `/monthPhotos/month-${month}.${ext}`,
                    `monthPhotos/month-${month}.${ext}`
                ];
                
                if (pathIndex >= paths.length) {
                    // Try next extension
                    tryLoadImage(extIndex + 1, 0);
                    return;
                }
                
                imagePath = paths[pathIndex];
                const img = new Image();
                
                img.onload = function() {
                    bgLayer.style.backgroundImage = `url("${imagePath}")`;
                    bgLayer.style.opacity = '1';
                    bgLayer.style.display = 'block';
                    console.log('✓ Background image loaded:', imagePath);
                    
                    // Extract accent color from the same image
                    const accentColor = extractAccentColor(img);
                    if (accentColor) {
                        document.documentElement.style.setProperty('--accent', accentColor);
                        console.log('ACCENT SET TO:', accentColor);
                        
                        // Calculate accent-strong (slightly darker) and accent-light (lighter)
                        const rgbMatch = accentColor.match(/\d+/g);
                        if (rgbMatch && rgbMatch.length === 3) {
                            // accent-strong: darker version
                            const rStrong = Math.max(0, Math.round(parseInt(rgbMatch[0]) * 0.75));
                            const gStrong = Math.max(0, Math.round(parseInt(rgbMatch[1]) * 0.75));
                            const bStrong = Math.max(0, Math.round(parseInt(rgbMatch[2]) * 0.75));
                            const strongColor = `rgb(${rStrong}, ${gStrong}, ${bStrong})`;
                            document.documentElement.style.setProperty('--accent-strong', strongColor);
                            console.log('ACCENT STRONG SET TO:', strongColor);
                        }
                    } else {
                        console.warn('ACCENT EXTRACTION FAILED - using fallback');
                    }
                };
                
                img.onerror = function() {
                    console.warn('ACCENT IMAGE FAILED TO LOAD:', imagePath);
                    // Try next path, then next extension
                    tryLoadImage(extIndex, pathIndex + 1);
                };
                
                console.log('Trying to load:', imagePath);
                img.src = imagePath;
            }
            
            tryLoadImage(0, 0);
        }

        // Prevent double rendering
        window.__phraseRendered = false;

        // Initialize interactive UI with event delegation (resilient to re-renders)
        let interactiveUIInitialized = false;
        function initInteractiveUI() {
            // Only set up delegation once
            if (interactiveUIInitialized) {
                return;
            }
            interactiveUIInitialized = true;

            // Event delegation for all interactive buttons
            document.addEventListener('click', async (e) => {
                // Share button
                const shareBtn = e.target.closest('[data-action="share"]');
                if (shareBtn) {
                    e.preventDefault();
                    e.stopPropagation();
                    await shareUrl(shareBtn);
                    return;
                }

                // Cookie settings button
                const openCmpBtn = e.target.closest('[data-action="open-cookies"]');
                if (openCmpBtn) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (window.__openCMP) {
                        await window.__openCMP();
                    } else {
                        alert('Οι ρυθμίσεις cookies δεν είναι ακόμη διαθέσιμες. Κάνε refresh και δοκίμασε ξανά.');
                    }
                    return;
                }

            }, { passive: false });

            console.log('Interactive UI initialized with event delegation');
        }

        // Render phrase immediately (no consent check)
        function renderPhrase() {
            if (window.__phraseRendered) {
                return;
            }

            const today = new Date();
            const todayKey = getDateKey(today);
            const dailyPhrase = getPhraseForDate(todayKey);
            
            // Update section title with date
            const sectionTitle = document.getElementById('sectionTitle');
            const displayDate = formatDateForDisplay(today);
            sectionTitle.textContent = `Η σημερινή φράση (${displayDate})`;
            
            // Update streak
            const streak = updateStreak();
            const streakLine = document.getElementById('streakLine');
            if (streak && streak > 0) {
                streakLine.textContent = `🔥 Συνεχόμενες επισκέψεις: ${streak} ${streak === 1 ? 'ημέρα' : 'ημέρες'}`;
            } else {
                streakLine.style.display = 'none';
            }
            
            // Ensure interactive UI is initialized
            initInteractiveUI();
            
            // Show phrase with reveal animation
            setTimeout(() => {
                showPhrase(dailyPhrase, true);
                window.__phraseRendered = true;
            }, 300);
        }
        
        // Smooth scroll handler for anchor links (Safari fix)
        function handleAnchorClick(e) {
            const href = e.currentTarget.getAttribute('href');
            if (href && href.startsWith('#')) {
                e.preventDefault();
                const targetId = href.substring(1);
                const target = document.getElementById(targetId) || document.querySelector(`[name="${targetId}"]`);
                if (target) {
                    const headerOffset = 80;
                    const elementPosition = target.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initBackground();
            renderPhrase();
            renderOnThisDayQuote();
            renderRecentPhrases(7);
            
            // Initialize interactive UI (event delegation)
            initInteractiveUI();

            // Add smooth scroll handlers to footer links (for anchor links)
            const footerLinks = document.querySelectorAll('footer a[href^="#"]');
            footerLinks.forEach(link => {
                link.addEventListener('click', handleAnchorClick);
            });
        });
    </script>
</body>
</html>
